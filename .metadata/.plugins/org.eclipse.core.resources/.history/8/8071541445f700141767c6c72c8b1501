import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.geometry.HPos;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.ComboBox;
import javafx.scene.control.Label;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextArea;
import javafx.scene.control.TextField;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

import java.sql.*;

public class DatabaseConnection extends Application {
	private Button btConnectDatabase = new Button("Connect to Database");
	  private Button btBatchUpdate = new Button("Batch Update");
	  private Button btNonBatchUpdate = new Button("Non-Batch Update");
	  private Label lblStatus = new Label();
	  private TextArea display = new TextArea();
	  
	  private Statement stmt;
	  String url = "jdbc:mysql://localhost/javabook";
	  String user = "scott";
	  String password = "tiger";
	  
@Override // Override the start method in the Application class
public void start(Stage primaryStage) {   

	    HBox hbox = new HBox(5);
	    HBox hbox2 = new HBox(5);
	    hbox.getChildren().addAll(lblStatus, btConnectDatabase);
	    hbox2.getChildren().addAll(btBatchUpdate, btNonBatchUpdate);
	    hbox.setPadding(new Insets(5, 5, 5, 5));
	    hbox.setSpacing(10);
	    hbox2.setPadding(new Insets(5, 5, 5, 5));
	    hbox2.setSpacing(10);
	    BorderPane pane = new BorderPane();
	    pane.setTop(hbox);
	    pane.setCenter(display);
	    pane.setBottom(hbox2);
	    
	    
	 // Create a scene and place it in the stage
	    Scene scene = new Scene(pane, 420, 180);
	    primaryStage.setTitle("DB Connection"); // Set the stage title
	    primaryStage.setScene(scene); // Place the scene in the stage
	    primaryStage.show(); // Display the stage   
	    
	    btConnectDatabase.setOnAction(e -> connectDatabase());
}

public void connectDatabase() {
    try {
      // Load the JDBC driver
      Class.forName("com.mysql.jdbc.Driver");
      System.out.println("Driver loaded");

      // Establish a connection
      Connection connection = DriverManager.getConnection
        ("jdbc:mysql://localhost/javabook", "scott", "tiger");

      System.out.println("Database connected");

      // Create a statement
      stmt = connection.createStatement();
      
      //create a temp table
	    String dropTempTable = "drop table if exists Temp;";
	    stmt.executeUpdate(dropTempTable);
		String createTempTable = 
				  "create table Temp (" +  
				  "num1 double," +
				  "num2 double," +
				  "num3 double," +
				  "primary key (num1));";
		stmt.executeUpdate(createTempTable);
    }
    catch (Exception ex) {
      ex.printStackTrace();
    }
  }
/**
 * The main method is only needed for the IDE with limited
 * JavaFX support. Not needed for running from the command line.
 */
public static void main(String[] args) {
  launch(args);
}
}
